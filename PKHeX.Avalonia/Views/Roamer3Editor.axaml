<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:PKHeX.Avalonia.ViewModels"
             x:Class="PKHeX.Avalonia.Views.Roamer3Editor"
             x:DataType="vm:Roamer3EditorViewModel">

    <Design.DataContext>
        <vm:Roamer3EditorViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto" Margin="15">
        <ScrollViewer>
            <StackPanel Spacing="15">
                <TextBlock Text="Gen 3 Roamer Editor" FontWeight="Bold" FontSize="18"/>

                <!-- Glitch Warning -->
                <TextBlock Text="{Binding GlitchWarning}"
                           IsVisible="{Binding IsGlitched}"
                           Foreground="Orange"
                           TextWrapping="Wrap"/>

                <!-- Species and Active -->
                <Border Classes="section-card"
                        CornerRadius="4"
                        Padding="15">
                    <StackPanel Spacing="10">
                        <TextBlock Text="Roamer Info" FontWeight="Bold"/>

                        <Grid ColumnDefinitions="100,*" RowDefinitions="Auto,Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Species:" VerticalAlignment="Center"/>
                            <ComboBox Grid.Row="0" Grid.Column="1"
                                      ItemsSource="{Binding SpeciesList}"
                                      SelectedIndex="{Binding SelectedSpeciesIndex}"
                                      MinWidth="150">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Text}"/>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Active:" VerticalAlignment="Center" Margin="0,5,0,0"/>
                            <CheckBox Grid.Row="1" Grid.Column="1" IsChecked="{Binding IsActive}" Margin="0,5,0,0"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Level:" VerticalAlignment="Center" Margin="0,5,0,0"/>
                            <NumericUpDown Grid.Row="2" Grid.Column="1"
                                           Value="{Binding CurrentLevel}"
                                           Minimum="1" Maximum="100"
                                           Width="80" HorizontalAlignment="Left" Margin="0,5,0,0"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Current HP:" VerticalAlignment="Center" Margin="0,5,0,0"/>
                            <NumericUpDown Grid.Row="3" Grid.Column="1"
                                           Value="{Binding CurrentHp}"
                                           Minimum="0" Maximum="999"
                                           Width="80" HorizontalAlignment="Left" Margin="0,5,0,0"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- PID -->
                <Border Classes="section-card"
                        CornerRadius="4"
                        Padding="15">
                    <StackPanel Spacing="10">
                        <TextBlock Text="PID" FontWeight="Bold"/>

                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="PID (Hex):" VerticalAlignment="Center"/>
                            <TextBox Text="{Binding PidHex}" Width="120"/>
                            <Button Content="Random" Command="{Binding RandomPidCommand}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="5">
                            <TextBlock Text="Shiny:" VerticalAlignment="Center"/>
                            <TextBlock Text="Yes" Foreground="Gold" IsVisible="{Binding IsShiny}" VerticalAlignment="Center"/>
                            <TextBlock Text="No" Opacity="0.6" IsVisible="{Binding !IsShiny}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- IVs -->
                <Border Classes="section-card"
                        CornerRadius="4"
                        Padding="15">
                    <StackPanel Spacing="10">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="IVs" FontWeight="Bold" VerticalAlignment="Center"/>
                            <Button Content="Max All" Command="{Binding MaxIvsCommand}"/>
                        </StackPanel>

                        <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto,Auto">
                            <StackPanel Grid.Row="0" Grid.Column="0" Spacing="3" Margin="0,0,10,5">
                                <TextBlock Text="HP"/>
                                <NumericUpDown Value="{Binding IvHp}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Spacing="3" Margin="0,0,10,5">
                                <TextBlock Text="Atk"/>
                                <NumericUpDown Value="{Binding IvAtk}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="2" Spacing="3" Margin="0,0,0,5">
                                <TextBlock Text="Def"/>
                                <NumericUpDown Value="{Binding IvDef}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="0" Spacing="3" Margin="0,0,10,0">
                                <TextBlock Text="Spe"/>
                                <NumericUpDown Value="{Binding IvSpe}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Spacing="3" Margin="0,0,10,0">
                                <TextBlock Text="SpA"/>
                                <NumericUpDown Value="{Binding IvSpa}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="2" Spacing="3">
                                <TextBlock Text="SpD"/>
                                <NumericUpDown Value="{Binding IvSpd}" Minimum="0" Maximum="31" Width="80"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,10,0,0">
            <Button Content="Save" Command="{Binding SaveCommand}"/>
        </StackPanel>
    </Grid>
</UserControl>
