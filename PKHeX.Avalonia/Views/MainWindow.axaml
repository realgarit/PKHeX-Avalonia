<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PKHeX.Avalonia.ViewModels"
        xmlns:views="using:PKHeX.Avalonia.Views"
        x:Class="PKHeX.Avalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="{Binding WindowTitle}"
        Width="800" Height="600"
        MinWidth="600" MinHeight="400">

    <Window.KeyBindings>
        <KeyBinding Gesture="Ctrl+O" Command="{Binding OpenFileCommand}" />
        <KeyBinding Gesture="Ctrl+S" Command="{Binding SaveFileCommand}" />
        <KeyBinding Gesture="Ctrl+Shift+S" Command="{Binding SaveFileAsCommand}" />
    </Window.KeyBindings>

    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_Open..." Command="{Binding OpenFileCommand}" InputGesture="Ctrl+O" />
                <MenuItem Header="_Save" Command="{Binding SaveFileCommand}" InputGesture="Ctrl+S" />
                <MenuItem Header="Save _As..." Command="{Binding SaveFileAsCommand}" InputGesture="Ctrl+Shift+S" />
                <Separator />
                <MenuItem Header="_Close" Command="{Binding CloseFileCommand}" />
            </MenuItem>
        </Menu>

        <!-- Status Bar -->
        <Border DockPanel.Dock="Bottom" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" Padding="8,4">
            <TextBlock Text="{Binding CurrentSave.Version, StringFormat='Game: {0}', FallbackValue='No save loaded'}" />
        </Border>

        <!-- Main Content -->
        <Grid>
            <!-- No Save Loaded State -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center"
                        IsVisible="{Binding !HasSave}">
                <TextBlock Text="Welcome to PKHeX Avalonia"
                           FontSize="24"
                           FontWeight="Light"
                           HorizontalAlignment="Center" />
                <TextBlock Text="Open a save file to get started"
                           Opacity="0.6"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,16" />
                <Button Content="Open Save File"
                        Command="{Binding OpenFileCommand}"
                        HorizontalAlignment="Center"
                        Classes="accent" />
            </StackPanel>

            <!-- Save Loaded State -->
            <views:BoxViewer DataContext="{Binding BoxViewer}" IsVisible="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).HasSave}" />
        </Grid>
    </DockPanel>
</Window>
