<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:PKHeX.Avalonia.ViewModels"
             x:Class="PKHeX.Avalonia.Views.SuperTrainingEditor"
             x:DataType="vm:SuperTrainingEditorViewModel">

    <Border Padding="16" Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
        <Panel>
            <!-- Not supported message -->
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        IsVisible="{Binding !IsSupported}">
                <TextBlock Text="Super Training not available"
                           FontSize="18"
                           HorizontalAlignment="Center"
                           Opacity="0.7" />
                <TextBlock Text="This save type does not support Super Training (Gen 6 XY/ORAS only)."
                           HorizontalAlignment="Center"
                           Opacity="0.5"
                           Margin="0,8,0,0" />
            </StackPanel>

            <!-- Main content -->
            <DockPanel IsVisible="{Binding IsSupported}">
                <!-- Header -->
                <DockPanel DockPanel.Dock="Top" Margin="0,0,0,12">
                    <TextBlock Text="Super Training Editor" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center" />
                    <Button Content="Refresh"
                            Command="{Binding RefreshCommand}"
                            HorizontalAlignment="Right"
                            Padding="12,6" />
                </DockPanel>

                <!-- Content -->
                <Grid ColumnDefinitions="*,16,*">
                    <!-- Left: Training Bags -->
                    <Border Grid.Column="0"
                            Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                            CornerRadius="4"
                            Padding="16">
                        <DockPanel>
                            <TextBlock DockPanel.Dock="Top" Text="Training Bags" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,12" />
                            <ScrollViewer>
                                <ItemsControl ItemsSource="{Binding Bags}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate DataType="vm:TrainingBagViewModel">
                                            <Grid ColumnDefinitions="60,8,*" Margin="0,4">
                                                <TextBlock Text="{Binding SlotLabel}" VerticalAlignment="Center" />
                                                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                                                    <NumericUpDown Value="{Binding BagType}" Minimum="0" Maximum="255" Width="80" />
                                                    <TextBlock Text="{Binding BagName}" VerticalAlignment="Center" Opacity="0.7" />
                                                </StackPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </DockPanel>
                    </Border>

                    <!-- Right: Training Stages/Records -->
                    <Border Grid.Column="2"
                            Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                            CornerRadius="4"
                            Padding="16">
                        <DockPanel>
                            <TextBlock DockPanel.Dock="Top" Text="Training Records" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,12" />

                            <Grid RowDefinitions="*,8,Auto">
                                <ListBox Grid.Row="0"
                                         ItemsSource="{Binding Stages}"
                                         SelectedItem="{Binding SelectedStage}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate DataType="vm:TrainingStageViewModel">
                                            <TextBlock Text="{Binding DisplayName}" />
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <!-- Selected Stage Details -->
                                <Border Grid.Row="2"
                                        Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                                        CornerRadius="4"
                                        Padding="12"
                                        IsVisible="{Binding SelectedStage, Converter={x:Static ObjectConverters.IsNotNull}}">
                                    <Grid ColumnDefinitions="*,16,*" DataContext="{Binding SelectedStage}">
                                        <!-- Record 1 -->
                                        <StackPanel Grid.Column="0" Spacing="8">
                                            <TextBlock Text="Record 1" FontWeight="SemiBold" />
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <TextBlock Text="Species:" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding Species1Name}" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <TextBlock Text="Time:" VerticalAlignment="Center" />
                                                <NumericUpDown Value="{Binding Time1}"
                                                               Minimum="0"
                                                               Maximum="9999"
                                                               FormatString="F2"
                                                               Width="100" />
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Record 2 -->
                                        <StackPanel Grid.Column="2" Spacing="8">
                                            <TextBlock Text="Record 2" FontWeight="SemiBold" />
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <TextBlock Text="Species:" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding Species2Name}" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <TextBlock Text="Time:" VerticalAlignment="Center" />
                                                <NumericUpDown Value="{Binding Time2}"
                                                               Minimum="0"
                                                               Maximum="9999"
                                                               FormatString="F2"
                                                               Width="100" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </Grid>
                        </DockPanel>
                    </Border>
                </Grid>
            </DockPanel>
        </Panel>
    </Border>
</UserControl>
